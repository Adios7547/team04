<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reviewDAO">

	<!-- 아직 미완성 -->
	<update id="reviewUpdate" parameterType="ReviewVO">
	
		UPDATE review SET review_content= ${reviewContent} WHERE review_number = ${reviewNumber} and member_email = ${memberEmail 받아서 해야함} ;
	
	</update>
	
	<!--  아직 미완성-->
	<delete id="reviewDelete" parameterType="ReviewVO">
	
			DELETE FROM review WHERE email = ${email 받아서 해야함 세션} and 
			review_number = ${reviewNumber};
			
	</delete>
	
	
	
	<!-- 가게 명을 가져오기위에 조인함 -->
	<select id="reviewGetList" parameterType="string" resultType="hashmap">
	
		Select re.review_number reviewNumber, re.review_date reviewDate, re.review_grade reviewGrade
			, re.review_content reviewContent
			, re.shop_number shopNumber
			, re.member_email memberEmail
			, re.review_fname reviewFname
			, re.REVIEW_REALFNAME reviewRealfname
			, shop.shop_title shopTitle
	from review re left outer join             (SELECT distinct s.shop_title , s.shop_number
           						 FROM shop s left outer join review r
           						 ON s.shop_number = r.shop_number
            					where r.member_email = #{email}) shop 
    on re.shop_number = shop.shop_number
				<!-- 유저 이메일 세션으로 받아서 해쉬 맵으로 넣어야함 일단은 데이터 나오나 볼려고 강제로 입력함 -->	
	</select>
	

</mapper>